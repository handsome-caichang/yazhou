webpackJsonp([50],{"+OAN":function(t,e){},"Ip/g":function(t,e){},MBDF:function(t,e,i){"use strict";e.b=function(t){return a.a.smajax("getnoticeinfosbyeid",t)},e.a=function(t){return a.a.smajax("getnotice",t)};var a=i("6PB2")},UWiG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("MBDF"),n={name:"announcement-detail",components:{RichTextArea:i("ubef").a},data:function(){return{wxTitle:"公告详情",title:"",content:"",date:"",params:{pname:"publicInfo_detail",id:this.$router.currentRoute.params.id},isLoading:!0,imgState:0}},computed:{contentHtml:function(){return{content:this.content,imgState:this.imgState}}},created:function(){this.getDetail()},methods:{getDetail:function(){var t=this;Object(a.a)(this.params).then(function(e){200==e.result.code&&(t.title=e.data.title,t.date=e.data.date,t.content=app.tool.richTextToHtml(e.data.content),t.isLoading=!1)})}},beforeDestroy:function(){app.eventDefine.emit("refresh")}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return""!=t.content?i("div",[i("scroller-base",{staticClass:"scroller",attrs:{data:t.contentHtml}},[i("div",{staticClass:"detail-container"},[i("div",{staticClass:"top"},[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),i("span",{staticClass:"date"},[t._v(t._s(t.date))])]),i("div",{staticClass:"bottom-content"},[t.content?i("rich-text-area",{attrs:{richText:t.content},on:{imgLoaded:function(e){t.imgState++}}}):t._e()],1)]),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"})],1)],1):t._e()},staticRenderFns:[]};var s=i("VU/8")(n,o,!1,function(t){i("+OAN")},"data-v-04e2efa2",null);e.default=s.exports},ubef:function(t,e,i){"use strict";var a=i("//Fk"),n=i.n(a),o={name:"rich-text-area",props:{richText:{type:String},enableImgLoadEvent:{type:Boolean,default:!0},enableImagePreview:{type:Boolean,default:!0}},data:function(){return{_voice:"",status:0}},methods:{imageLoadHandler:function(t,e){var i=this;return new n.a(function(i){var a=parseInt(t.style.width||t.getAttribute("width")),n=parseInt(t.style.height||t.getAttribute("height"));a&&n&&a>e&&(t.style.width=e+"px",t.style.height=e/a*n+"px"),t.addEventListener("load",function(){i("onload")}),t.addEventListener("error",function(){i("onerror")})}).then(function(t){return i.enableImgLoadEvent&&i.$emit("imgLoaded"),t})},processor:function(){var t=this,e=this.$refs.richTextBox,i=e.offsetWidth,a=e.querySelectorAll("img"),o=[],s=[],r=new RegExp("^((http|https)://|data:image)");if(Array.prototype.forEach.call(a,function(e,a){var n=e.src;n&&r.test(n)?(o.push(n),s.push(t.imageLoadHandler(e,i))):(e.style.width=0,e.style.height=0)}),n.a.all(s).then(function(t){t.forEach(function(t,e){"onerror"===t&&o.splice(e,1)})}),this.enableImagePreview){var c=0;e.addEventListener("click",function(t){var e=(new Date).getTime();if(!(e-c<500)){c=e;var i=t.target;"img"===i.nodeName.toLowerCase()&&app.sdk.previewImage({current:i.src,urls:o})}})}},voiceFormat:function(){var t=this,e={loading:function(){t.status=1,t._voice.classList.add("loading")},playing:function(){t.status=2,t._voice.classList.add("play")},end:function(){t.status=0,t._voice.classList.remove("loading"),t._voice.classList.remove("play")},endAuto:function(){t.status=0,t._voice.classList.remove("loading"),t._voice.classList.remove("play")},error:function(){t.status=0,t._voice.classList.remove("loading"),t._voice.classList.remove("play")}};this.$refs.richTextBox.addEventListener("click",function(i){t._voice&&t._voice==i.target&&2==t.status?app.voice.stop():(t._voice&&t._voice!=i.target&&app.voice.stop(),t._voice=i.target,"voice"===t._voice.className&&app.voice.play(t._voice.getAttribute("url"),e))})}},mounted:function(){this.processor(),this.voiceFormat()},beforeDestroy:function(){app.voice.flag&&app.voice.stop()}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"richTextBox",staticClass:"rich-text-box",domProps:{innerHTML:this._s(this.richText)}})},staticRenderFns:[]};var r=i("VU/8")(o,s,!1,function(t){i("Ip/g")},null,null);e.a=r.exports}});