webpackJsonp([28],{"+dQp":function(t,e,s){t.exports=s.p+"static/img/003.b9ab2d7.png"},"1W4h":function(t,e,s){t.exports=s.p+"static/img/006.a0ac661.png"},"2dX+":function(t,e,s){"use strict";var i=s("bwys"),a=s.n(i),n=s("nMbT"),o=s.n(n),c=s("wYIz"),r=s.n(c),u=s("DgDI"),g=s.n(u),l=s("CQNM"),h=s.n(l),m=(s("uNq/"),s("+dQp")),d=s.n(m),p=s("Sxcu"),v=s.n(p),f=s("croJ"),x=s.n(f),w=s("1W4h"),y=s.n(w),C=s("azor"),b=s.n(C),_=s("2jlb"),S=s.n(_),D=s("I5WJ"),T=s.n(D),N={name:"empty-page",props:{type:{default:1},text:{type:String,default:""}},data:function(){return{pages:{no404:{img:r.a,width:294,height:204,text:"抱歉，您找的页面可能去睡觉了"},no1000:{img:a.a,width:293,height:254,text:"网络消化不良"},no1001:{img:o.a,width:200,height:271,text:"没有找到你指定的搜索结果~"},no0:{img:g.a,width:292,height:144},no1:{img:h.a,width:259,height:264},no2:{img:h.a,width:259,height:264},no3:{img:d.a,width:271,height:225},no4:{img:v.a,width:200,height:270},no5:{img:x.a,width:200,height:270},no6:{img:y.a,width:291,height:201},no7:{img:b.a,width:211,height:221},no8:{img:S.a,width:200,height:270,text:"还没有评价和建议哦"},no9:{img:T.a,width:350,height:320,text:"建议已经被删除"}}}},computed:{page:function(){var t=this.pages["no"+this.type];return{style:{width:t.width/2+"px",height:t.height/2+"px",backgroundImage:"url("+t.img+")"},text:this.text||t.text}}}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"empty-box"},[e("div",{staticClass:"empty-img",style:this.page.style}),e("div",{staticClass:"empty-tips"},[this._v(this._s(this.page.text))])])},staticRenderFns:[]};var I=s("VU/8")(N,k,!1,function(t){s("Yixk")},"data-v-6412c432",null);e.a=I.exports},"2jlb":function(t,e,s){t.exports=s.p+"static/img/008.3e0fba5.png"},CQNM:function(t,e,s){t.exports=s.p+"static/img/001.41bfc62.png"},DgDI:function(t,e,s){t.exports=s.p+"static/img/000.51c407a.png"},I5WJ:function(t,e,s){t.exports=s.p+"static/img/009.41bfc62.png"},JoGE:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("m7ZI"),a=s("2dX+"),n=s("NuQY"),o=s.n(n),c={data:function(){return{wxTitle:"投诉与建议",isTrueName:1,isShowSubmit:!0,suggestionDetail:{},suggestText:"",receiveid:null,defaultIcon:o.a,showCryptonym:!0,scrollNum:0}},computed:{scrollData:function(){return{detail:this.suggestionDetail,num:this.scrollNum}}},methods:{changeTrueName:function(){this.isTrueName=0===this.isTrueName?1:0},renderData:function(){var t=this;Object(i.b)({suggestid:this.$route.params.id}).then(function(e){e.result.code===app.errok&&(t.suggestionDetail=e.data,t.suggestionDetail.studentcontent=app.tool.textToHtml(t.suggestionDetail.studentcontent))})},sendSuggest:function(t){var e=this;if(""!=this.suggestText){var s={receiveid:this.receiveid,suggestid:this.$route.params.id,content:this.suggestText,isanonymous:this.isTrueName,teacherid:app.sysInfo.id};Object(i.a)(s).then(function(s){s.result.code===app.errok&&(e.suggestText="",e.isShowSubmit=!0,e.showCryptonym=!0,e.isTrueName=1,e.receiveid="",e.renderData(),app.toast("success","您的回复提交成功。"),t&&app.event.emit("refresh"))})}else app.toast("info","请输入内容。")},changeSuggest:function(t){this.editSuggest(),t&&(this.isShowSubmit=!1,this.receiveid=t.receiveid,this.suggestText=t.teachercontent,this.showCryptonym=!1,this.isTrueName=t.isanonymous)},editSuggest:function(){var t=this;this.isShowSubmit=!0,this.suggestText="",this.$nextTick(function(){t.$refs.scroll.scroller.scrollTo(0,t.$refs.scroll.scroller.maxScrollY),t.$refs.textarea.focus()})},cancleEditSuggest:function(){this.isShowSubmit=!0,this.suggestText="",this.showCryptonym=!0,this.isTrueName=1},imageLoaded:function(){this.scrollNum++}},created:function(){window.b=this,this.renderData()},components:{EmptyPage:a.a}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("scroller-base",{ref:"scroll",staticClass:"scroll",attrs:{data:t.scrollData}},["{}"!==JSON.stringify(t.suggestionDetail)?s("div",{staticClass:"wrapper"},[s("div",{staticClass:"item"},[s("div",{staticClass:"item-top"},[s("div",{staticClass:"avatar",style:{backgroundImage:"url("+t.suggestionDetail.photo+")"}}),s("div",{staticClass:"text"},[s("div",{staticClass:"name"},[t._v(t._s(t.suggestionDetail.studentname))]),s("div",{staticClass:"time"},[t._v(t._s(t.suggestionDetail.studenttime))])])]),s("div",{ref:"content",staticClass:"content",domProps:{innerHTML:t._s(t.suggestionDetail.studentcontent)}}),s("img-area",{staticClass:"img",attrs:{edit:!1,imageType:0,imageFileList:t.suggestionDetail.listimgfile},on:{imageLoaded:t.imageLoaded}})],1),t.suggestionDetail.employeereceive&&t.suggestionDetail.employeereceive.length>0?s("div",{staticClass:"record"},[s("div",{staticClass:"num"},[t._v("\n\t\t\t\t回复记录 ("+t._s(t.suggestionDetail.employeereceive&&t.suggestionDetail.employeereceive.length)+"条)\n\t\t\t")]),s("div",{staticClass:"now-reply",on:{click:t.editSuggest}},[t._v("\n\t\t\t\t立即回复\n\t\t\t\t"),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-tousuyujianyi1"}})])])]):t._e(),t._l(t.suggestionDetail.employeereceive,function(e){return t.suggestionDetail.employeereceive&&t.suggestionDetail.employeereceive.length>0?s("div",{staticClass:"item"},[s("div",{staticClass:"item-top",on:{click:function(s){t.changeSuggest(e)}}},[1===e.isanonymous?s("div",{staticClass:"avatar",style:{backgroundImage:"url("+t.defaultIcon+")"}}):t._e(),0===e.isanonymous?s("div",{staticClass:"avatar",style:{backgroundImage:"url("+e.teacherphoto+")"}}):t._e(),s("div",{staticClass:"text"},[s("div",{staticClass:"name"},[t._v(t._s(e.isanonymous?"回复":e.teachername))]),s("div",{staticClass:"time"},[t._v(t._s(e.teachertime))])]),s("div",{staticClass:"icon-wrapper"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xiugai"}})])])]),s("div",{staticClass:"content"},[t._v(t._s(e.teachercontent))])]):t._e()}),s("div",{staticClass:"send-msg"},[s("div",{staticClass:"huifu"},[t._v("回复")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.suggestText,expression:"suggestText"}],ref:"textarea",staticClass:"textarea",attrs:{placeholder:"输入回复内容",maxlength:"500"},domProps:{value:t.suggestText},on:{touchstart:function(e){t.app.area.start(e)},touchmove:function(e){t.app.area.move(e)},touchend:function(e){t.app.area.end(e)},input:function(e){e.target.composing||(t.suggestText=e.target.value)}}}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCryptonym,expression:"showCryptonym"}],staticClass:"niming",on:{click:t.changeTrueName}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":1===t.isTrueName?"#icon-duoxuan":"#icon-duoxuan-weixuanze"}})]),t._v("\n\t\t\t\t匿名回复\n\t\t\t")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCryptonym,expression:"showCryptonym"}],staticClass:"text"},[t._v("勾选“匿名回复”后，家长不能看到回复人的真实姓名。否则，系统会显示回复人的真实姓名。")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSubmit,expression:"isShowSubmit"}],staticClass:"submit",on:{click:function(e){t.sendSuggest(!0)}}},[t._v("\n\t\t\t\t 提交\n\t\t\t")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowSubmit,expression:"!isShowSubmit"}],staticClass:"submit-two"},[s("div",{staticClass:"sure",on:{click:function(e){t.sendSuggest(!1)}}},[t._v("确定")]),s("div",{staticClass:"cancle",on:{click:t.cancleEditSuggest}},[t._v("取消")])])])],2):t._e(),"{}"==JSON.stringify(t.suggestionDetail)?s("empty-page",{staticClass:"noData",attrs:{type:9}}):t._e()],1)},staticRenderFns:[]};var u=s("VU/8")(c,r,!1,function(t){s("VCf8")},"data-v-13e78e56",null);e.default=u.exports},NuQY:function(t,e,s){t.exports=s.p+"static/img/cryptonym.5126a9e.png"},Sxcu:function(t,e,s){t.exports=s.p+"static/img/004.0b83c59.png"},VCf8:function(t,e){},Yixk:function(t,e){},azor:function(t,e,s){t.exports=s.p+"static/img/007.4037d25.png"},bwys:function(t,e,s){t.exports=s.p+"static/img/1000.a245c1e.png"},croJ:function(t,e,s){t.exports=s.p+"static/img/005.c11bf0d.png"},m7ZI:function(t,e,s){"use strict";e.c=function(t){return i.a.smajax("getsuggestionforteacherlist",t)},e.b=function(t){return i.a.smajax("getsuggestionforteacherinfo",t)},e.a=function(t){return i.a.smajax("addsuggestionforteacher",t)};var i=s("6PB2")},nMbT:function(t,e,s){t.exports=s.p+"static/img/1001.d7ee272.png"},"uNq/":function(t,e,s){t.exports=s.p+"static/img/002.0fbc03b.png"},wYIz:function(t,e,s){t.exports=s.p+"static/img/404.49a5047.png"}});