webpackJsonp([47],{H3kf:function(t,e){},Kroh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),n=s("S3P+"),c={mixins:[app.mixin.popupWindowRouteMixin],props:{opened:{type:Boolean,default:!1},campusObj:{type:Object}},computed:a()({},Vuex.mapState(["customConfigInfo"]),{position:function(){return this.selectOne?"center":"sideRight"}}),data:function(){return{list:[],scrollerConfig:{tag:"base"},selectOne:!1,selectTwo:!1}},methods:{selectCampus:function(t){t.isSelect=!t.isSelect,this.$emit("selectCampus",t),this.selectOne=!0,this.selectTwo=!1},changeContent:function(){this.selectOne=!1,this.selectTwo=!0},sureSelect:function(){this.campusObj.Key?(this.$emit("selectCampusOver"),this.close()):app.toast("info","请选择校区。")}},watch:{opened:function(t){t&&(this.selectOne=!0,this.selectTwo=!1)},selectTwo:function(t){this.list=t?app.customConfigInfo.CampusList:[]}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("action-sheet",{directives:[{name:"show",rawName:"v-show",value:t.opened,expression:"opened"}],staticClass:"role-actionsheet",attrs:{position:t.position,scrollerConfig:t.scrollerConfig,data:t.list},on:{close:t.close}},[t.selectOne?s("div",{staticClass:"selectOne-heard",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"points"},[t._v("提示")])]):t._e(),t.selectOne?s("div",{staticClass:"wrapper"},[s("div",[s("div",{staticClass:"title"},[t._v("转为正式学员(自动导入客户资料)")]),s("div",{staticClass:"selectCampus",on:{click:t.changeContent}},[t._v("\n                "+t._s(t.campusObj.Value&&t.campusObj.Value.Name?t.campusObj.Value.Name:"选择目标校区")+"\n                "),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])])]):t._e(),t.selectOne?s("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"footer-item",on:{click:t.close}},[t._v("取消")]),s("div",{staticClass:"footer-item spec",on:{click:t.sureSelect}},[t._v("确定")])]):t._e(),t.selectTwo?s("div",{staticClass:"actionsheet-hd selectTwo",attrs:{slot:"header"},slot:"header"},[t._v("校区选择")]):t._e(),t.selectTwo?s("div",{staticClass:"container"},t._l(t.list,function(e){return s("div",{staticClass:"item",class:{active:e.Key===t.campusObj.Key},on:{click:function(s){t.selectCampus(e)}}},[t._v("\n            "+t._s(e.Value.Name)+"\n       ")])})):t._e()])},staticRenderFns:[]};var l=s("VU/8")(c,o,!1,function(t){s("jwJt")},"data-v-3c44977b",null).exports,r={mixins:[app.mixin.popupWindowRouteMixin],props:{opened:{type:Boolean,default:!1}},computed:a()({},Vuex.mapState(["customConfigInfo"]),{list:function(){return""==this.selectTwoString?[]:"campus"==this.selectTwoString?app.customConfigInfo.CampusList:app.customConfigInfo.CustomerStatus},position:function(){return this.selectOne?"bottom":"sideRight"},scrollData:function(){return{list:this.list,flag:this.selectOne&&this.selectTwo}}}),data:function(){return{scrollerConfig:{tag:"base"},selectOne:!0,selectTwo:!1,selectTwoString:""}},methods:{select:function(t){this.$emit("selectObj",{type:this.selectTwoString,selectObj:t})},changeContent:function(t){this.selectOne=!1,this.selectTwo=!0,this.selectTwoString=t}},watch:{opened:function(t){t&&(this.selectOne=!0,this.selectTwo=!1,this.selectTwoString="")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.opened?s("action-sheet",{staticClass:"role-actionsheet",attrs:{position:t.position,scrollerConfig:t.scrollerConfig,data:t.scrollData},on:{close:t.close}},[t.selectOne?s("div",{staticClass:"selectOne"},[s("div",{staticClass:"selectOne-item",on:{click:function(e){t.changeContent("campus")}}},[t._v("校区")]),s("div",{staticClass:"selectOne-item",on:{click:function(e){t.changeContent("status")}}},[t._v("状态")])]):t._e(),t.selectTwo?s("div",{staticClass:"actionsheet-hd selectTwo",attrs:{slot:"header"},slot:"header"},[t._v(t._s("campus"==t.selectTwoString?"校区选择":"状态选择"))]):t._e(),t.selectTwo?s("div",{staticClass:"container"},t._l(t.list,function(e){return s("div",{staticClass:"item",on:{click:function(s){t.select(e)}}},[t._v("\n            "+t._s("campus"==t.selectTwoString?e.Value.Name:e.Value)+"\n       ")])})):t._e()]):t._e()},staticRenderFns:[]};var d=s("VU/8")(r,u,!1,function(t){s("utgp")},"data-v-2507e76c",null).exports,p={data:function(){return{list:[],pagingOption:{api:n.d,params:{pname:"querycustomer"}},isAllSelect:!1,showSelectCampus:!1,showSelectStatusAndCampus:!1,campusObj:{}}},computed:{isSelectCard:function(){return this.list.filter(function(t){return t.isSelect}).length>0}},methods:a()({},Vuex.mapMutations(["set_cunstomInfo"]),{selectCampus:function(t){this.campusObj=t},loadData:function(t){var e=this;t.then(function(t){t.errcode==app.errok&&(1===t.pageIndex&&(e.list=[]),t.data.forEach(function(t){e.$set(t,"isSelect",!1)}),e.list=e.list.concat(t.data))})},allSelect:function(){var t=this;this.isAllSelect=!this.isAllSelect,this.list.forEach(function(e){e.isSelect=!!t.isAllSelect})},selectCard:function(t){t.isSelect=!t.isSelect,this.isAllSelect&&(this.isAllSelect=!!t.isSelect&&this.isAllSelect)},getCustomId:function(){for(var t=[],e=0;e<this.list.length;e++)this.list[e].isSelect&&t.push(this.list[e].ID);return t.join(",")},handleCustomer:function(t){if(this.isSelectCard){var e=this.getCustomId(),s={text:"del"===t?"是否删除意向客户":"是否撤销转化中学员",textStyle:{textAlign:"center"}},i="del"===t?"id":"customerids",a={saveFlag:"del"===t?"deletecustomer":"disrelationtrystudent"};app.confirm(s).then(function(t){t&&(a[i]=e,Object(n.e)(a).then(function(t){t.errcode===app.errok&&alert("删除成功")}))})}},changeCustomToFormal:function(){this.isSelectCard&&(this.showSelectCampus=!0)},revise:function(){this.isSelectCard&&(this.showSelectStatusAndCampus=!0)},selectCampusOver:function(){var t=this.getCustomId();Object(n.e)({saveFlag:"trynewstudent",campusID:this.campusObj.Key,customerids:t}).then(function(t){t.ErrorCode===app.errok?app.toast("info","转化成功。"):app.toast("info",t.ErrorMsg)})},selectObj:function(t){var e=this,s=this.getCustomId(),i={saveFlag:"status"===t.type?"putcustomerstatus":"putcustomercampus",customers:s};"status"===t.type?i.status=t.selectObj.ID:i.campus=t.selectObj.Key,Object(n.e)(i).then(function(t){t.ErrorCode===app.errok?app.toast("info","转化成功。"):app.toast("info",t.ErrorMsg),e.showSelectStatusAndCampus=!1})}}),components:{SelectCampus:l,SelectStatusAndCampus:d}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"heard",on:{click:t.allSelect}},[s("span",{staticClass:"spec"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":t.isAllSelect?"#icon-duoxuan":"#icon-duoxuan-weixuanze"}})])]),t._v("\n        全选\n    ")]),s("div",{staticClass:"void"}),s("div",{staticClass:"list-body"},[s("scroller-super",{staticClass:"scroller",attrs:{type:2,data:t.list,pagingOption:t.pagingOption},on:{loadData:t.loadData}},[s("div",t._l(t.list,function(e){return s("div",{staticClass:"card"},[s("div",{staticClass:"card-heard",on:{click:function(s){t.selectCard(e)}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":e.isSelect?"#icon-duoxuan":"#icon-duoxuan-weixuanze"}})]),t._v("\n                        "+t._s(e.Name)+"\n                        "),s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-laoshifabu"}})])]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"item"},[t._v("主责任人:  "),s("span",{staticClass:"item-content"},[t._v(t._s(e.SalePersonName))])]),s("div",{staticClass:"item"},[t._v("手机号码:  "),s("span",{staticClass:"item-content"},[t._v(t._s(e.SMSTel))])]),s("div",{staticClass:"item"},[t._v("客户状态:  "),s("span",{staticClass:"item-content"},[t._v(t._s(e.CustomerStatusName))])]),s("div",{staticClass:"item"},[t._v("意向级别:  \n                            "),s("span",{staticClass:"item-content"},t._l(e.WillLevel,function(t){return s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-xingxingxuanzhong"}})])}))])])])}))])],1),s("div",{staticClass:"bottom"},[s("div",{staticClass:"bottom-item",class:{active:t.isSelectCard},on:{click:function(e){t.handleCustomer("del")}}},[t._v("删除")]),s("div",{staticClass:"bottom-item",class:{active:t.isSelectCard},on:{click:t.changeCustomToFormal}},[t._v("转为正式学员")]),s("div",{staticClass:"bottom-item",class:{active:t.isSelectCard},on:{click:function(e){t.handleCustomer("cancle")}}},[t._v("取消转化")]),s("div",{staticClass:"bottom-item",class:{active:t.isSelectCard},on:{click:t.revise}},[t._v("修改")])]),s("select-campus",{attrs:{opened:t.showSelectCampus,campusObj:t.campusObj},on:{"update:opened":function(e){t.showSelectCampus=e},selectCampusOver:t.selectCampusOver,selectCampus:t.selectCampus}}),s("select-status-and-campus",{attrs:{opened:t.showSelectStatusAndCampus},on:{"update:opened":function(e){t.showSelectStatusAndCampus=e},selectObj:t.selectObj}})],1)},staticRenderFns:[]};var m=s("VU/8")(p,h,!1,function(t){s("H3kf")},"data-v-e5f21760",null);e.default=m.exports},"S3P+":function(t,e,s){"use strict";e.b=function(t){return i.a.ajax("/weixin/teacher/Process.ashx",t)},e.d=function(t){return i.a.ajax("/weixin/teacher/Process.ashx",t)},e.e=function(t){return i.a.ajax("/weixin/teacher/Save.ashx",t)},e.a=function(t){return i.a.ajax("/api/Dictionary/Get",t)},e.c=function(t){return i.a.ajaxGet("/api/MasterReport/GetShiftType",t)};var i=s("6PB2")},jwJt:function(t,e){},utgp:function(t,e){}});