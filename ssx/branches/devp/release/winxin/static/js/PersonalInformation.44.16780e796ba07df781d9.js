webpackJsonp([44],{"/rf/":function(t,e){},"5xWs":function(t,e){},"8weA":function(t,e){},HggL:function(t,e){},t7C8:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("//Fk"),i=s.n(a),n=s("+ZVV"),o={name:"edit",mixins:[app.mixin.popupWindowRouteMixin],data:function(){return{wxTitle:"",text:"",showClearIcon:!1}},props:{opened:{},titleType:{type:Number,default:null},editText:{type:String,default:null}},methods:{editCancel:function(){this.close(),this.clearText()},complete:function(){var t=this;if(app.tool.trim(this.text)){var e=parseInt(this.titleType);Object(n.f)(0==e?{qq:this.text}:1==e?{liveplace:this.text}:{classname:this.text}).then(function(s){s.result.code==app.errok?(0==e?t.$emit("informationQQ",t.text):1==e?t.$emit("informationAddress",t.text):t.$emit("informationClassName",t.text),t.close(),t.clearText()):app.toast("error",s.result.msg)})}else app.toast("info","没有输入内容，请重新填写。")},clearText:function(){this.text=""}},watch:{text:function(){this.showClearIcon=""!=this.text},opened:function(){this.opened&&(this.text=this.editText,0==this.titleType?app.tool.setDocTitle("QQ号码"):1==this.titleType?app.tool.setDocTitle("家庭住址"):app.tool.setDocTitle("就读班级")),this.$nextTick(function(){this.$refs.focuEl.focus()})}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"as-edit"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.opened,expression:"opened"}],staticClass:"edit-container"},[1==t.titleType?s("div",{staticClass:"address-area"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"focuEl",attrs:{maxlength:"84",name:"",cols:"30",rows:"4"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]):s("div",{staticClass:"edit-area"},[s("div",{staticClass:"input-area"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"focuEl",staticClass:"content-text",attrs:{type:"text",maxlength:"50"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),s("div",{staticClass:"icon-area",on:{click:t.clearText}},[t.showClearIcon?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-sousuowenzishanchu"}})]):t._e()])]),s("div",{staticClass:"btn-area"},[s("div",{staticClass:"cancel",on:{click:t.editCancel}},[t._v("取消")]),s("div",{staticClass:"complete",on:{click:t.complete}},[t._v("完成")])])])])},staticRenderFns:[]};var r=s("VU/8")(o,c,!1,function(t){s("/rf/")},"data-v-b53551c4",null).exports,l={name:"sex-actionsheet",mixins:[app.mixin.popupWindowRouteMixin],props:{opened:{},position:{type:String,default:"center"}},methods:{changeSex:function(t){var e=this,s=t;Object(n.f)({sex:t}).then(function(t){t.result.code==app.errok?(e.$emit("informationSex",s),e.close()):app.toast("error",t.result.msg)})}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("action-sheet",{directives:[{name:"show",rawName:"v-show",value:t.opened,expression:"opened"}],attrs:{position:t.position},on:{close:t.close}},[s("div",{staticClass:"sex"},[s("div",{staticClass:"title"},[t._v("选择性别")]),s("div",{staticClass:"item",on:{click:function(e){t.changeSex(1)}}},[s("div",{staticClass:"item-nan"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-nan1"}})])]),s("div",{staticClass:"class-text"},[t._v("男")])]),s("div",{staticClass:"item",on:{click:function(e){t.changeSex(2)}}},[s("div",{staticClass:"item-nv"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-nv1"}})])]),s("div",{staticClass:"class-text"},[t._v("女")])])])])},staticRenderFns:[]};var u=s("VU/8")(l,d,!1,function(t){s("HggL")},"data-v-2b3d9b15",null).exports,p={name:"select-actionsheet",mixins:[app.mixin.popupWindowRouteMixin],props:{opened:{},type:{type:Number,default:0},position:{default:"bottom"},header:{type:Boolean,default:!1},footer:{type:Boolean,default:!1},list:{}},data:function(){return{curSchoolName:null,curSchoolId:null,curGradeName:null,curGradeId:null}},computed:{renderData:function(){return{opened:this.opened}}},methods:{changeAction:function(t,e){var s=this;0==this.type?(this.curSchoolName=t.value,this.curSchoolId=t.id,Object(n.f)({fullTimeschool:t.value}).then(function(e){e.result.code==app.errok?(s.$emit("informationCampu",t),s.close()):app.toast("error",e.result.msg)})):1==this.type&&(this.curGradeName=t.name,this.curGradeId=t.id,Object(n.f)({grade:t.id}).then(function(e){e.result.code==app.errok?(s.$emit("informationCampu",t),s.close()):app.toast("error",e.result.msg)}))}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("action-sheet",{directives:[{name:"show",rawName:"v-show",value:t.opened,expression:"opened"}],attrs:{position:t.position,data:t.renderData},on:{close:t.close}},[t._l(t.list,function(e,a){return 0==t.type?s("div",{key:a,staticClass:"card",class:t.curSchoolId==e.id?"lighHeight":"",on:{click:function(s){t.changeAction(e)}}},[s("span",[t._v(t._s(e.value))]),t.curSchoolId==e.id?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-danxuan"}})]):t._e()]):t._e()}),t._l(t.list,function(e,a){return 1==t.type?s("div",{key:a,staticClass:"card",class:t.curGradeName==e.name&&t.curGradeId==e.id?"lighHeight":"",on:{click:function(s){t.changeAction(e,a)}}},[s("span",[t._v(t._s(e.name))]),t.curGradeName==e.name&&t.curGradeId==e.id?s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-danxuan"}})]):t._e()]):t._e()})],2)},staticRenderFns:[]};var v={name:"personal-information",data:function(){return{wxTitle:"个人信息",isLoading:!0,userPhoto:"",avatarTimer:null,position:"bottom",type:0,titleType:0,editText:"",FullSchoolList:"",GradeList:"",list:[],sex:"",school:"",gradeName:"",className:"",qq:"",livePlace:"",openSelectActionsheet:!1,openSexActionsheet:!1,openEdit:!1}},methods:{selectAction:function(t){0==this.type?this.school=t.value:1==this.type&&(this.gradeName=t.name)},showSelectAS:function(t){this.type=parseInt(t),this.openSelectActionsheet||(this.list=0==this.type?this.FullSchoolList:this.GradeList),0==t&&this.FullSchoolList.length<1?app.toast("请联系您的学校增加公立学校选项~"):this.openSelectActionsheet=!this.openSelectActionsheet},showEdit:function(t){this.titleType=parseInt(t),this.editText=0==this.titleType?this.qq:1==this.titleType?this.livePlace:this.className,this.openEdit=!this.openEdit},showSexAS:function(){this.openSexActionsheet=!this.openSexActionsheet},acceptSex:function(t){this.sex=t},acceptEditQQ:function(t){this.qq=app.tool.trim(t)},acceptEditAddress:function(t){this.livePlace=app.tool.trim(t)},informationClassName:function(t){this.className=app.tool.trim(t)},loadAll:function(){var t=this,e=Object(n.c)().then(function(t){return t}),s=Object(n.b)().then(function(t){return t});i.a.all([e,s]).then(function(e){t.isLoading=!1,e[0].result.code==app.errok&&e[1].result.code==app.errok&&(t.FullSchoolList=e[1].data.schools,t.GradeList=e[1].data.grades,t.userPhoto=e[0].data.userphoto,t.sex=e[0].data.sex,t.school=e[0].data.school,t.gradeName=e[0].data.gradename,t.className=e[0].data.classname,t.qq=e[0].data.qq,t.livePlace=e[0].data.liveplace)})},updateAvatar:function(){var t=this;app.sdk.highChooseImage({max:1}).then(function(e){if(e.length>0){var s=e[0];app.avatarModify(s).then(function(e){t.isLoading=!0,s.promise.then(function(a){Object(n.g)({mediaids:s.serverId,upwidth:parseInt(e.width),x:parseInt(e.x),y:parseInt(e.y),cutwidth:e.areaWidth,cutheight:e.areaheight}).then(function(e){t.isLoading=!1,e.result.code==app.errok?(app.toast("success","头像修改成功。"),t.isFinish()):app.toast("error",e.result.msg)})})})}})},isFinish:function(){var t=this;Object(n.c)().then(function(e){e.result.code==app.errok?t.userPhoto==e.data.userphoto?t.avatarTimer=setTimeout(function(){t.isFinish()},1e3):(t.userPhoto=e.data.userphoto,clearTimeout(t.avatarTimer)):app.toast("error",e.result.msg)})}},created:function(){this.loadAll()},watch:{openEdit:function(){this.opened||app.tool.setDocTitle("个人信息")}},components:{SelectActionsheet:s("VU/8")(p,h,!1,function(t){s("8weA")},"data-v-6a0c5a12",null).exports,Edit:r,SexActionsheet:u}},f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"infomation-container"},[s("scroller-base",{staticClass:"scroller"},[s("div",{staticClass:"card head-img",on:{click:t.updateAvatar}},[s("div",{staticClass:"card-lf"},[s("div",{staticClass:"userphoto",style:"background-image:url("+t.userPhoto+")"})]),s("div",{staticClass:"card-rt"},[s("span",[t._v("更换头像")])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("div",{staticClass:"card sex",on:{click:t.showSexAS}},[s("div",{staticClass:"card-lf"},[t._v("性别")]),s("div",{staticClass:"card-rt"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1==t.sex,expression:"sex==1"}]},[t._v("男")]),s("span",{directives:[{name:"show",rawName:"v-show",value:2==t.sex,expression:"sex==2"}]},[t._v("女")])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("div",{staticClass:"card grade",on:{click:function(e){t.showSelectAS(1)}}},[s("div",{staticClass:"card-lf"},[t._v("年级")]),s("div",{staticClass:"card-rt"},[s("span",[t._v(t._s(t.gradeName))])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("div",{staticClass:"card class-name",on:{click:function(e){t.showEdit(2)}}},[s("div",{staticClass:"card-lf"},[t._v("就读班级")]),s("div",{staticClass:"card-rt"},[s("span",[t._v(t._s(t.className))])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("div",{staticClass:"card qq",on:{click:function(e){t.showEdit(0)}}},[s("div",{staticClass:"card-lf"},[t._v("QQ号码")]),s("div",{staticClass:"card-rt"},[s("span",[t._v(t._s(t.qq))])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("div",{staticClass:"card livePlace",on:{click:function(e){t.showEdit(1)}}},[s("div",{staticClass:"card-lf"},[t._v("家庭住址")]),s("div",{staticClass:"card-rt"},[s("span",[t._v(t._s(t.livePlace))])]),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),s("router-link",{staticClass:"card",attrs:{tag:"div",to:"/passwordModify"}},[s("div",{staticClass:"card-lf"},[t._v("修改密码")]),s("div",{staticClass:"card-rt"}),s("span",{staticClass:"nav-icon"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])])],1),s("select-actionsheet",{staticClass:"select-actionsheet",attrs:{type:t.type,opened:t.openSelectActionsheet,list:t.list},on:{"update:opened":function(e){t.openSelectActionsheet=e},informationCampu:t.selectAction}}),s("edit",{staticClass:"edit",attrs:{opened:t.openEdit,titleType:t.titleType,editText:t.editText},on:{"update:opened":function(e){t.openEdit=e},informationQQ:t.acceptEditQQ,informationAddress:t.acceptEditAddress,informationClassName:t.informationClassName}}),s("sex-actionsheet",{staticClass:"sex-actionsheet",attrs:{opened:t.openSexActionsheet,position:t.position},on:{"update:opened":function(e){t.openSexActionsheet=e},informationSex:t.acceptSex}}),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"})],1)},staticRenderFns:[]};var m=s("VU/8")(v,f,!1,function(t){s("5xWs")},"data-v-46884520",null);e.default=m.exports}});