webpackJsonp([52],{"2nJb":function(t,s){},"u/O6":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("vqv5"),e={name:"workinfo",data:function(){return{wxTitle:"工作统计",role:"",work_sdate:"",work_edate:"",dateForShow:"",dataObj:{},isLoading:!0}},computed:{renderData:function(){return{dataObj:this.dataObj}}},created:function(){var t=this;4==app.sysInfo.currole.id?this.role=3:32==app.sysInfo.currole.id?this.role=2:16==app.sysInfo.currole.id&&(this.role=1),Object(i.b)({uid:app.sysInfo.id,userrole:this.role,querymonth:""}).then(function(s){s.result.code==app.errok?(t.isLoading=!1,t.handleData(s)):(t.isLoading=!0,app.toast("error",s.result.msg))})},methods:{goToCourseDetails:function(){this.$router.push({path:"/workInfoCourseDetails/"+this.work_sdate+"/"+this.work_edate})},goToAttendanceDetails:function(){this.$router.push({path:"/workInfoAttendanceDetails/"+this.work_sdate+"/"+this.work_edate})},handleData:function(t){this.work_sdate=t.data.starttime,this.work_edate=t.data.endtime,this.dateForShow=t.data.starttime.substr(0,4)+"年"+t.data.endtime.substr(5,2)+"月";var s=t.data;console.log(t),t.cctRate=0==s.coursetotalcount?"0":parseInt(s.coursefinishedcount/s.coursetotalcount*100)+"%",t.cct1=s.coursefinishedcount,t.cct0=s.coursetotalcount,t.cmtRate=0==s.coursecommentcount?"0":parseInt(s.coursestudentcommentcount/s.coursecommentcount*100)+"%",t.cmt1=s.coursestudentcommentcount,t.cmt0=s.coursecommentcount,t.adtRate=0==s.coursestudentcount?"0":parseInt(s.coursestudentisattendcount/s.coursestudentcount*100)+"%",t.adt1=s.coursestudentisattendcount,t.adt0=s.coursestudentcount,this.dataObj=t},selectMonth:function(t){var s=this;if(this.isLoading=!0,this.isLoading)if(0==t)Object(i.b)({uid:app.sysInfo.id,userrole:this.role,querymonth:"PREV",starttime:this.work_sdate,endtime:this.work_edate}).then(function(t){s.isLoading=!1,t.result.code==app.errok?s.handleData(t):app.toast("error","统计信息获取失败。")});else{var a=(new Date).getFullYear(),e=(new Date).getMonth()+1;if(this.work_sdate.substr(0,4)==a&&this.work_edate.substr(5,2)==e)return app.toast("info","已是当前月。"),void(this.isLoading=!1);Object(i.b)({uid:app.sysInfo.id,userrole:this.role,querymonth:"NEXT",starttime:this.work_sdate,endtime:this.work_edate}).then(function(t){s.isLoading=!1,t.result.code==app.errok?s.handleData(t):app.toast("error","统计信息获取失败。")})}}}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"workinfo-container"},[a("scroller-base",{staticClass:"scroller",attrs:{data:t.renderData}},[a("div",{staticClass:"title",on:{click:function(s){t.goToCourseDetails()}}},[a("div",{staticClass:"title-lf"},[t._v("已上课时")]),a("div",{staticClass:"title-rt"},[t._v("详情\n                "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),a("div",{staticClass:"card"},[a("div",{staticClass:"describe"},[t._v("上课率")]),a("div",{staticClass:"percentage wigC"},[t._v(t._s(t.dataObj.cctRate))]),a("div",{staticClass:"progress"},[a("div",{staticClass:"process-child wigB",style:{width:t.dataObj.cctRate}})]),a("div",{staticClass:"count"},[a("div",{staticClass:"count-lf"},[a("div",{staticClass:"circle-box"},[a("div",{staticClass:"circle wigB"})]),a("div",[t._v("已上："+t._s(t.dataObj.cct1)+"次")])]),a("div",{staticClass:"count-rt"},[t._v("共计："+t._s(t.dataObj.cct0)+"次")])])]),a("div",{staticClass:"title",on:{click:function(s){t.goToAttendanceDetails()}}},[a("div",{staticClass:"title-lf"},[t._v("学生出勤")]),a("div",{staticClass:"title-rt"},[t._v("详情\n                "),a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),a("div",{staticClass:"card"},[a("div",{staticClass:"describe"},[t._v("出勤率")]),a("div",{staticClass:"percentage wibC"},[t._v(t._s(t.dataObj.adtRate))]),a("div",{staticClass:"progress"},[a("div",{staticClass:"process-child wibB",style:{width:t.dataObj.adtRate}})]),a("div",{staticClass:"count"},[a("div",{staticClass:"count-lf"},[a("div",{staticClass:"circle-box"},[a("div",{staticClass:"circle wibB"})]),a("div",[t._v("实到："+t._s(t.dataObj.adt1)+"人")])]),a("div",{staticClass:"count-rt"},[t._v("应到："+t._s(t.dataObj.adt0)+"人")])])]),a("div",{staticClass:"title"},[a("div",{staticClass:"title-lf"},[t._v("课程评价")])]),a("div",{staticClass:"card"},[a("div",{staticClass:"describe"},[t._v("评价率")]),a("div",{staticClass:"percentage wiyC"},[t._v(t._s(t.dataObj.cmtRate))]),a("div",{staticClass:"progress"},[a("div",{staticClass:"process-child wiyB",style:{width:t.dataObj.cmtRate}})]),a("div",{staticClass:"count"},[a("div",{staticClass:"count-lf"},[a("div",{staticClass:"circle-box"},[a("div",{staticClass:"circle wiyB"})]),a("div",[t._v("已评价："+t._s(t.dataObj.cmt1)+"人")])]),a("div",{staticClass:"count-rt"},[t._v("应评价："+t._s(t.dataObj.cmt0)+"人")])])]),a("div",{staticClass:"void"})]),a("div",{staticClass:"footer"},[a("div",{staticClass:"prev-month",on:{click:function(s){t.selectMonth(0)}}},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-zuobianjiantou"}})])]),a("div",{staticClass:"month"},[t._v(t._s(t.dateForShow))]),a("div",{staticClass:"next-month",on:{click:function(s){t.selectMonth(1)}}},[a("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-youjiantou"}})])])]),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"})],1)},staticRenderFns:[]};var c=a("VU/8")(e,o,!1,function(t){a("2nJb")},"data-v-69e11d0d",null);s.default=c.exports},vqv5:function(t,s,a){"use strict";s.b=function(t){return i.a.smajax("getworkinfo",t)},s.a=function(t){return i.a.smajax("getworkdetailinfo",t)};var i=a("6PB2")}});