webpackJsonp([13],{"9DQ8":function(t,s){},"H3l+":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("Dd8w"),e=a.n(i),r=a("BEBN"),n={name:"user-setting",data:function(){return{wxTitle:"设置",isLoading:!1,avatarTimer:null}},computed:e()({},Vuex.mapState(["userInfo"])),methods:e()({},Vuex.mapMutations(["set_userInfo","set_addressList","set_appCart","set_appFavorite","set_cartTotalMoney","set_orderAddress","set_appCartCampus","set_goodsDetailCampus","set_vaildCartList","set_expiredCartList"]),{updateAvatar:function(){var t=this,s=this;app.sdk.highChooseImage({max:1}).then(function(a){if(a.length>0){var i=a[0];app.avatarModify(i).then(function(a){t.isLoading=!0,i.promise.then(function(t){Object(r.a)({MediaID:i.serverId,X:parseInt(a.x),Y:parseInt(a.y),CutWidth:a.areaWidth,CutHeight:a.areaheight,UpWidth:parseInt(a.width)}).then(function(t){s.isLoading=!1,t.ErrorCode==app.errok?(app.toast("success","头像修改成功。"),s.isFinish()):app.toast("error",t.ErrorMsg)})})})}})},userLogOut:function(){var t=this;this.isLoading=!0,Object(r.q)().then(function(s){t.isLoading=!1,s.ErrorCode==app.errok?(t.set_userInfo({}),t.set_addressList([]),t.set_appCart(-1),t.set_appFavorite([]),t.set_cartTotalMoney(0),t.set_orderAddress({}),t.set_vaildCartList([]),t.set_expiredCartList([]),t.set_appCartCampus({ID:"",Name:"",Products:[]}),t.set_goodsDetailCampus({ID:"",Name:"",Products:[]}),t.$router.back(),setTimeout(function(){homeNav&&homeNav.click(0)},app.duration+100)):app.toast("error",s.ErrorMsg)})},isFinish:function(){var t=this;Object(r.i)({isUpdating:!0}).then(function(s){s.ErrorCode==app.errok?t.userInfo.Image==s.Data.Image?t.avatarTimer=setTimeout(function(){t.isFinish()},1e3):(t.set_userInfo(s.Data),clearTimeout(t.avatarTimer)):app.toast("error",s.ErrorMsg)})}})},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"user-setting"},[a("scroller-base",{staticClass:"scroller",attrs:{data:t.userInfo}},[a("div",{staticClass:"list avatar-wrapper cate",on:{click:t.updateAvatar}},[a("div",{staticClass:"list-hd"},[a("span",{staticClass:"avatar",style:"background-image:url("+t.userInfo.Image+")"})]),a("div",{staticClass:"list-bd fade"},[t._v("更换头像")]),a("svg",{staticClass:"icon next",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-xiangxia"}})])]),a("div",{staticClass:"list"},[a("div",{staticClass:"list-hd"},[t._v("学员姓名")]),a("div",{staticClass:"list-bd"},[t._v(t._s(t.userInfo.StudentName))])]),a("div",{staticClass:"list"},[a("div",{staticClass:"list-hd"},[t._v("手机号码")]),a("div",{staticClass:"list-bd"},[t._v(t._s(t.userInfo.Mobile))])]),a("div",{staticClass:"list cate"},[a("div",{staticClass:"list-hd"},[t._v("在读年级")]),a("div",{staticClass:"list-bd"},[t._v(t._s(t.userInfo.Grade))])]),a("div",{staticClass:"list"},[a("router-link",{staticClass:"link",attrs:{to:"/addressSetting/0"}},[a("div",{staticClass:"list-hd"},[t._v("收货地址")]),a("div",{staticClass:"list-bd"}),a("svg",{staticClass:"icon next",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-xiangxia"}})])])],1),a("div",{staticClass:"list cate"},[a("router-link",{staticClass:"link",attrs:{to:"/passwordSetting",append:""}},[a("div",{staticClass:"list-hd"},[t._v("修改密码")]),a("svg",{staticClass:"icon next",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-xiangxia"}})])])],1),a("div",{staticClass:"list log-off",on:{click:t.userLogOut}},[t._v("退出登录")])]),t.isLoading?a("loading",{attrs:{bgType:1}}):t._e()],1)},staticRenderFns:[]};var d=a("VU/8")(n,o,!1,function(t){a("9DQ8")},"data-v-726116a7",null);s.default=d.exports}});