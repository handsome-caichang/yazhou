webpackJsonp([11],{"5xHY":function(t,e,s){t.exports=s.p+"static/img/login.1e377aa.png"},GNdt:function(t,e){},ZuCC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Dd8w"),a=s.n(i),r=s("BEBN"),n=s("5xHY"),o=s.n(n),u={name:"login",data:function(){return{wxTitle:"手机商城",uname:"",pwd:"",loginBg:o.a,isLoading:!1}},computed:a()({},Vuex.mapState(["config","companySuffix","registerUser"]),{isActive:function(){return this.uname.length>0&&this.pwd.length>0},compCanRegist:function(){return 1==this.config.RegistLimit||2==this.config.LoginMode}}),methods:a()({},Vuex.mapMutations(["set_userInfo","set_addressList","set_cartListRefreshFlag","set_userPageRefreshFlag"]),{gotoPage:function(){var t=this,e=[];for(var s in app.mallApp.allPages)"login"!==s&&"register"!==s&&app.mallApp.allPages[s]&&e.push(s);e.length>0?this.$router.back():setTimeout(function(){t.$router.replace("/")},600)},loginSubmit:function(t){var e=this;this.isActive&&(this.isLoading=!0,Object(r.w)({LoginName:this.uname,Password:this.pwd}).then(function(t){e.isLoading=!1,t.ErrorCode==app.errok?(e.set_userInfo(t.Data),e._updateInfo(),e.gotoPage()):app.toast("error",t.ErrorMsg)}))},_updateInfo:function(){var t=this;Object(r.f)().then(function(e){e.ErrorCode==app.errok&&t.set_addressList(e.Data)}),this.set_cartListRefreshFlag(),this.set_userPageRefreshFlag()},autoLogin:function(){this.registerUser.SSXUserName&&this.registerUser.SSXUserPwd&&(this.uname=this.registerUser.SSXUserName,this.pwd=this.registerUser.SSXUserPwd,this.loginSubmit())}}),created:function(){window.a=this,this.autoLogin()},watch:{$route:function(t,e){var s=this;"register"===e.name&&setTimeout(function(){s.autoLogin()},300)}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login",style:"backgroundImage:url("+t.loginBg+")"},[s("scroller-base",{staticClass:"scroller"},[s("div",[s("div",{staticClass:"title"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-denglu"}})])]),s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item-bd"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-wode"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.uname,expression:"uname"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.uname},on:{input:function(e){e.target.composing||(t.uname=e.target.value)}}})]),s("div",{staticClass:"form-item-ft"},[t._v("@"+t._s(t.companySuffix))])]),s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item-bd"},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-mima"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})])]),s("div",{staticClass:"form-btn",class:{active:t.isActive},on:{click:function(e){t.loginSubmit(e)}}},[t._v("登 录")]),t.compCanRegist?t._e():s("div",{staticClass:"form-tips"},[t._v("您还没有注册？\n\t\t\t\t\t"),s("router-link",{attrs:{to:"/register"}},[t._v(" 注册 ")])],1)])])]),t.isLoading?s("loading",{attrs:{bgType:1}}):t._e()],1)},staticRenderFns:[]};var l=s("VU/8")(u,c,!1,function(t){s("GNdt")},"data-v-01f8daf0",null);e.default=l.exports}});