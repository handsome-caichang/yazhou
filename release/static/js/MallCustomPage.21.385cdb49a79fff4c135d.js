webpackJsonp([21],{NeUR:function(e,t){},Prre:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("ru/X"),a=r("f7lS"),i={name:"mall-custom-page",mixins:[app.mixin.shareMixin],data:function(){return{wxTitle:"活动详情",imgsNum:0,richText:""}},computed:{scrollerData:function(){return{richText:this.richText,imgsNum:this.imgsNum}}},created:function(){var e=this,t=this.$route.params.type,r=void 0;"ad"===t?r=a.b:"banner"===t&&(r=a.d),r({ID:this.$route.params.id}).then(function(t){t.ErrorCode===app.errok&&(e.richText=t.Data.Content)})},components:{RichTextArea:n.a}},o={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("scroller-base",{staticClass:"mall-custom-page",attrs:{data:e.scrollerData}},[e.richText?r("rich-text-area",{attrs:{richText:e.richText},on:{imgLoaded:function(t){e.imgsNum+=1}}}):e._e()],1)},staticRenderFns:[]};var s=r("VU/8")(i,o,!1,function(e){r("NeUR")},"data-v-5e446fa0",null);t.default=s.exports},"ru/X":function(e,t,r){"use strict";var n=r("//Fk"),a=r.n(n),i={name:"rich-text-area",props:{richText:{type:String},enableImgLoadEvent:{type:Boolean,default:!0},enableImagePreview:{type:Boolean,default:!0}},data:function(){return{}},methods:{imageLoadHandler:function(e,t){var r=this;return new a.a(function(r){var n=parseInt(e.style.width||e.getAttribute("width")),a=parseInt(e.style.height||e.getAttribute("height"));n&&a&&n>t&&(e.style.width=t+"px",e.style.height=t/n*a+"px"),e.addEventListener("load",function(){r("onload")}),e.addEventListener("error",function(){r("onerror")})}).then(function(e){return r.enableImgLoadEvent&&r.$emit("imgLoaded"),e})},processor:function(){var e=this,t=this.$refs.richTextBox,r=t.offsetWidth,n=t.querySelectorAll("img"),i=[],o=[],s=new RegExp("^((http|https)://|data:image)");if(Array.prototype.forEach.call(n,function(t,n){var a=t.src;a&&s.test(a)?(i.push(a),o.push(e.imageLoadHandler(t,r))):(t.style.width=0,t.style.height=0)}),a.a.all(o).then(function(e){e.forEach(function(e,t){"onerror"===e&&i.splice(t,1)})}),this.enableImagePreview){var c=0;t.addEventListener("click",function(e){var t=(new Date).getTime();if(!(t-c<500)){c=t;var r=e.target;"img"===r.nodeName.toLowerCase()&&wx&&wx.previewImage({current:r.src,urls:i})}})}}},mounted:function(){this.processor()}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"richTextBox",staticClass:"rich-text-box",domProps:{innerHTML:this._s(this.richText)}})},staticRenderFns:[]};var s=r("VU/8")(i,o,!1,function(e){r("wL9r")},null,null);t.a=s.exports},wL9r:function(e,t){}});