webpackJsonp([24],{hImg:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),n=s.n(a),i=s("BEBN"),r={name:"order-comment",mixins:[app.mixin.shareMixin],data:function(){return{isLoading:!0,submitLoading:!1,wxTitle:"订单评价",products:[],queryPara:null,levelList:[{text:"一般",icon:"#icon-yiban"},{text:"满意",icon:"#icon-manyi"},{text:"非常满意",icon:"#icon-feichangmanyi"}]}},computed:{productIDs:function(){return this.products.map(function(t){return t.ItemID})}},methods:n()({},Vuex.mapMutations(["set_orderListRefreshFlag","set_orderDetailRefreshFlag"]),{inputEvent:function(t){t.Content.length>=150&&(t.Content=t.Content.substring(0,150))},chooseLevel:function(t,e){var s=this.productIDs.indexOf(t.ItemID);this.products[s].Level=e+1},submitComment:function(){var t=this,e=!1,s=[];this.products.forEach(function(t){t.Content=t.Content.trim(),s.push({ItemID:t.ItemID,Content:t.Content,Level:t.Level,Image1:"",Image2:"",Image3:"",Image4:""}),t.Content||(e=!0)}),e?app.toast("info","评价内容不能为空。"):(this.submitLoading=!0,Object(i.d)({OrderID:this.queryPara.orderId,Comments:s}).then(function(e){t.submitLoading=!1,e.ErrorCode==app.errok?(app.toast("success","评价成功。"),1==t.queryPara.type?t.set_orderListRefreshFlag():2==t.queryPara.type&&(t.set_orderDetailRefreshFlag(),t.set_orderListRefreshFlag()),t.$router.back()):app.toast("error",e.ErrorMsg)}))}}),created:function(){var t=this;this.queryPara=this.$route.query,Object(i.y)({ID:this.queryPara.orderId}).then(function(e){t.isLoading=!1,e.ErrorCode==app.errok?(t.products=[],e.Data.Items.forEach(function(e){t.products.push({ItemID:e.ID,Name:e.Name,Image:e.Image,Content:"",Level:2})})):app.toast("error",e.ErrorMsg)})}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"order-comment"},[s("div",{staticClass:"body"},[s("scroller-base",{staticClass:"scroller",attrs:{data:t.products}},t._l(t.products,function(e){return s("div",[s("div",{staticClass:"card"},[s("div",{staticClass:"card-hd"},[s("span",{staticClass:"img",style:"background-image:url("+e.Image+")"}),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(e.Name))])])]),s("div",{staticClass:"card-bd"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Content,expression:"pro.Content"}],attrs:{placeholder:"是否对孩子有帮助，教学是否认真负责，还有什么改进的建议和好点子，写点您真实的使用感受吧！"},domProps:{value:e.Content},on:{input:[function(s){s.target.composing||t.$set(e,"Content",s.target.value)},function(s){t.inputEvent(e)}]}}),s("span",{staticClass:"num"},[t._v(t._s(e.Content.length)+"/150")])]),s("div",{staticClass:"card-ft"},[s("div",{staticClass:"level-hd"},[t._v("本次消费整体体验如何？")]),s("div",{staticClass:"level-bd"},t._l(t.levelList,function(a,n){return s("div",{staticClass:"level-bd-item",class:{active:e.Level==n+1},on:{click:function(s){t.chooseLevel(e,n)}}},[s("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":a.icon}})]),t._v(t._s(a.text)+"\n\t\t\t\t\t\t\t")])}))])]),s("div",{staticClass:"void"})])}))],1),s("div",{staticClass:"footer",on:{click:t.submitComment}},[t._v("发布")]),t.isLoading?s("loading"):t._e(),t.submitLoading?s("loading",{attrs:{bgType:1}}):t._e()],1)},staticRenderFns:[]};var c=s("VU/8")(r,o,!1,function(t){s("ppk8")},"data-v-c3953b9a",null);e.default=c.exports},ppk8:function(t,e){}});