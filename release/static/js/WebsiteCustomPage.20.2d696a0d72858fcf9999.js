webpackJsonp([20],{dNpJ:function(t,e){},lYMO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("ru/X"),i=a("f7lS"),n={name:"website-rich-text-page",mixins:[app.mixin.shareMixin],data:function(){return{wxTitle:this.$route.params.title,imgsNum:0,richData:""}},computed:{scrollerData:function(){return{richData:this.richData,imgsNum:this.imgsNum}}},methods:{},created:function(){var t=this;Object(i.h)({id:this.$route.params.id}).then(function(e){e.ErrorCode===app.errok&&(t.richData=e.Data,t.v_shareResolve(function(){return app.tool.mallShare({title:this.wxTitle+" - "+e.Data.Title,desc:this.$store.state.config.Summary,link:app.tool.parseToWXshareUrl(this.$route.fullPath),imgUrl:this.$store.state.config.Logo})}))})},mounted:function(){},components:{RichTextArea:r.a}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroller-base",{staticClass:"website-rich-text-page",attrs:{data:t.scrollerData}},[a("div",{staticClass:"website-rich-text-page-header"},[a("div",{staticClass:"title"},[t._v(t._s(t.richData.Title))]),t.richData.CreateTime?a("span",{staticClass:"date"},[t._v(t._s(t._f("formatDatetime")(t.richData.CreateTime,"yyyy-MM-dd hh:mm")))]):t._e()]),t.richData.Content?a("rich-text-area",{attrs:{richText:t.richData.Content},on:{imgLoaded:function(e){t.imgsNum+=1}}}):t._e()],1)},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(t){a("dNpJ")},"data-v-ac22479a",null);e.default=o.exports},"ru/X":function(t,e,a){"use strict";var r=a("//Fk"),i=a.n(r),n={name:"rich-text-area",props:{richText:{type:String},enableImgLoadEvent:{type:Boolean,default:!0},enableImagePreview:{type:Boolean,default:!0}},data:function(){return{}},methods:{imageLoadHandler:function(t,e){var a=this;return new i.a(function(a){var r=parseInt(t.style.width||t.getAttribute("width")),i=parseInt(t.style.height||t.getAttribute("height"));r&&i&&r>e&&(t.style.width=e+"px",t.style.height=e/r*i+"px"),t.addEventListener("load",function(){a("onload")}),t.addEventListener("error",function(){a("onerror")})}).then(function(t){return a.enableImgLoadEvent&&a.$emit("imgLoaded"),t})},processor:function(){var t=this,e=this.$refs.richTextBox,a=e.offsetWidth,r=e.querySelectorAll("img"),n=[],s=[],o=new RegExp("^((http|https)://|data:image)");if(Array.prototype.forEach.call(r,function(e,r){var i=e.src;i&&o.test(i)?(n.push(i),s.push(t.imageLoadHandler(e,a))):(e.style.width=0,e.style.height=0)}),i.a.all(s).then(function(t){t.forEach(function(t,e){"onerror"===t&&n.splice(e,1)})}),this.enableImagePreview){var c=0;e.addEventListener("click",function(t){var e=(new Date).getTime();if(!(e-c<500)){c=e;var a=t.target;"img"===a.nodeName.toLowerCase()&&wx&&wx.previewImage({current:a.src,urls:n})}})}}},mounted:function(){this.processor()}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"richTextBox",staticClass:"rich-text-box",domProps:{innerHTML:this._s(this.richText)}})},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(t){a("wL9r")},null,null);e.a=o.exports},wL9r:function(t,e){}});